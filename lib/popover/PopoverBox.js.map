{"version":3,"sources":["../../dev/mtui/popover/PopoverBox.jsx"],"names":["PopoverBox","props","state","show","style","refPopover","showOrHide","obj","btn","getPlace","popover","wid","place","left","width","top","height","setState","mark","setStyle","nextProps","nextState","display","cName","push","className","mid","c","join","content"],"mappings":"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","file":"PopoverBox.js","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {position} from '../utils/offset';\r\nimport assign from '../utils/assign';\r\n\r\nclass PopoverBox extends Component {\r\n\r\n    // 构造函数\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false,\r\n            style: {}\r\n        };\r\n        this.refPopover = null;\r\n    }\r\n\r\n    closeModal(){\r\n        this.props.showOrHide(true);\r\n    }\r\n\r\n    // 设置place\r\n    setStyle(){\r\n        let obj = {};\r\n        let btn = this.props.getPlace();\r\n        let popover = position(this.refPopover);\r\n        let wid = 8; // 箭头的尺寸\r\n        // console.log('popover',popover)\r\n        if(this.props.place === 'top'){\r\n            obj.left = btn.left + (btn.width - popover.width) / 2;\r\n            obj.top = btn.top - popover.height - wid;\r\n        }else if(this.props.place === 'left'){\r\n            obj.left = btn.left - popover.width - wid;\r\n            obj.top = btn.top + (btn.height - popover.height) / 2;\r\n        }else if(this.props.place === 'right'){\r\n            obj.left = btn.left + btn.width + wid;\r\n            obj.top = btn.top + (btn.height - popover.height) / 2;\r\n        }else if(this.props.place === 'bottom'){\r\n            obj.left = btn.left + (btn.width - popover.width) / 2;\r\n            obj.top = btn.top + btn.height + wid;\r\n        }\r\n        this.setState({\r\n            style: obj,\r\n            show: this.props.show\r\n        });\r\n    }\r\n\r\n    showOrHide(mark){\r\n        this.setState({\r\n            show: mark\r\n        }, () => {\r\n            this.setStyle();\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.showOrHide(this.props.show);\r\n    }\r\n\r\n    componentWillUpdate(nextProps, nextState) {\r\n        if(nextProps.show !== this.props.show){\r\n            this.showOrHide(nextProps.show);\r\n        }     \r\n    }\r\n\r\n    render(){\r\n        var style = assign([\r\n            this.state.style, \r\n            {display: this.state.show ? 'block' : 'none'}, \r\n            this.props.style || {}]);\r\n\r\n        var cName = ['mt-popover', 'animated bounceIn'];\r\n        if(this.props.place){\r\n            cName.push('mt-popover-' + this.props.place);\r\n        }\r\n        if(this.props.className){\r\n            cName.push(this.props.className);\r\n        }\r\n\r\n        return <div id={this.props.mid} ref={ c => { this.refPopover = c;}} className={cName.join(' ')} style={style}>\r\n                    {this.props.content}\r\n                    <div className=\"mt-popover-arrow\"></div>\r\n               </div>;\r\n    }\r\n}\r\n\r\n// 主页\r\nexport default PopoverBox;"]}