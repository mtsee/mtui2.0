{"version":3,"sources":["../../dev/mtui/datePickers/DatePickers.jsx"],"names":["DatePickers","props","state","show","startDate","endDate","clear","selectDays","syncInner","Date","getTime","div","document","createElement","setAttribute","handler","mid","refBtn","setState","mark","setMid","self","dom","getElementById","body","appendChild","setPlace","height","left","top","width","out","style","modalStyle","display","format","other","cName","className","push","modalClass","render","join","bind","resetDays","range","showOrHide","obj","start","end","parseInt","val","date","callback","split","length","dateChecked","data","e","box","renderDiv","showBack","onChange","_btn","prevProps","defaultValue","arr","now","str","unmountComponentAtNode","size","dayval","c","handleClick","placeholder","defaultProps"],"mappings":"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","file":"DatePickers.js","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DatePickerBox from '../dateCore/DatePickerBox';\r\nimport { getMDay, weekNumber, addAndDelOneMonth, addOrDelMonthDay, getDateNow, formatDate, setHHMMSS, setMonths, strToObj } from '../dateCore/dateCore';\r\nimport { position } from '../utils/offset';\r\nimport assign from '../utils/assign';\r\nimport { removeDom } from '../utils/dom';\r\nimport { outWindow } from '../utils/outWindow';\r\nimport { getXY, clickBlank, offClickBlank } from '../utils/triggerBlank';\r\n\r\nclass DatePickers extends Component {\r\n\r\n    // 默认参数\r\n    static defaultProps = {\r\n        placeholder: '选择时间段',\r\n        showBack: null, // 显示时候的回调\r\n        onChange: null, // 关闭时候的回调\r\n        modalClass: '',\r\n        modalStyle: {},\r\n        range: [',', ','], // 取值范围\r\n        format: 'yyyy-mm-dd' // 格式化\r\n    }\r\n\r\n    // 构造函数\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false,\r\n            startDate: null,\r\n            endDate: null,\r\n            clear: false,\r\n            selectDays: null,\r\n            syncInner: new Date().getTime()\r\n        };\r\n        this.div = document.createElement('div');\r\n        this.div.setAttribute('class', 'mt-div');\r\n        this.handler = null;\r\n        this.mid = null;\r\n        this.refBtn = null;\r\n    }\r\n\r\n    // 同步inner 样式\r\n    syncInner() {\r\n        this.setState({\r\n            syncInner: new Date().getTime()\r\n        });\r\n    }\r\n\r\n    setPlace() {\r\n        return position(this.refBtn);\r\n    }\r\n\r\n    // setMid\r\n    setMid() {\r\n        if (this.mid === null) {\r\n            this.mid = 'mt_dates_' + +new Date();\r\n        }\r\n    }\r\n\r\n    // 渲染div\r\n    renderDiv(mark) {\r\n        this.setMid();\r\n        var self = this;\r\n        var dom = document.getElementById(this.mid);\r\n        // 首次渲染即可\r\n        if (!dom || mark) {\r\n            if (!mark) {\r\n                document.body.appendChild(this.div);\r\n            }\r\n\r\n            let { height, left, top, width } = this.setPlace();\r\n            let out = outWindow(width, height, top, left, {width: 460, height: 280});\r\n            let style = assign([{\r\n                left: out.left,\r\n                top: out.top\r\n            }, this.props.modalStyle || {}, { display: this.state.show ? 'block' : 'none' }]);\r\n            let { mid, format, ...other } = this.props;\r\n\r\n            let cName = ['mt-dates'];\r\n            if (this.props.className) {\r\n                cName.push(this.props.className);\r\n            }\r\n            if (this.props.modalClass) {\r\n                cName.push(this.props.modalClass);\r\n            }\r\n            if (mid) {\r\n                this.mid = mid;\r\n            }\r\n\r\n            ReactDOM.render(\r\n                <div className={cName.join(' ')} style={style} id={this.mid}>\r\n                    <DatePickerBox\r\n                        inner={this.state.syncInner}\r\n                        syncInner={this.syncInner.bind(this)}\r\n                        resetDays={this.resetDays.bind(this)}\r\n                        range={this.props.range[0]}\r\n                        showOrHide={this.showOrHide.bind(this)}\r\n                        nowDate={this.state.startDate}\r\n                        dates={{\r\n                            startDate: this.state.startDate,\r\n                            endDate: this.state.endDate\r\n                        }}\r\n                        format={format}\r\n                        mid={this.mid + '_start'} />\r\n                    <DatePickerBox\r\n                        inner={this.state.syncInner + 1}\r\n                        syncInner={this.syncInner.bind(this)}\r\n                        range={this.props.range[1]}\r\n                        resetDays={this.resetDays.bind(this)}\r\n                        showOrHide={this.showOrHide.bind(this)}\r\n                        nowDate={this.state.endDate}\r\n                        dates={{\r\n                            startDate: this.state.startDate,\r\n                            endDate: this.state.endDate\r\n                        }}\r\n                        format={format}\r\n                        mid={this.mid + '_end'} />\r\n                </div>\r\n                , this.div);\r\n        }\r\n    }\r\n\r\n    // /数据验证，开始时间不能小于结束时间\r\n    dateChecked(obj) {\r\n        let start, end;\r\n        if (obj['startDate']) {\r\n            start = obj.startDate;\r\n            end = this.state.endDate;\r\n        } else {\r\n            start = this.state.startDate;\r\n            end = obj.endDate;\r\n        }\r\n\r\n        // 如果开始大于结束\r\n        if (parseInt(formatDate(start, 'yyyymmdd').val, 10) > parseInt(formatDate(end, 'yyyymmdd').val, 10)) {\r\n            let date = obj['startDate'] ? start : end;\r\n            return {\r\n                startDate: date,\r\n                endDate: date\r\n            };\r\n        } else {\r\n            return {\r\n                startDate: start,\r\n                endDate: end\r\n            };\r\n        }\r\n    }\r\n\r\n    // /重新渲染 如果\r\n    resetDays(date, callback, mark) {\r\n        if (mark) {\r\n            mark = mark.split('_');\r\n            mark = mark[mark.length - 1];\r\n        }\r\n        let obj = {};\r\n        obj[mark + 'Date'] = date;\r\n\r\n        obj = this.dateChecked(obj);\r\n\r\n        this.setState(obj, function () {\r\n            // 设置days\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n\r\n    // /隐藏显示\r\n    showOrHide(show, callback, data, e) {\r\n        let box = document.getElementById(this.mid);\r\n\r\n        // 如果没有，初始化一个\r\n        if (!box) {\r\n            this.renderDiv();\r\n        }\r\n\r\n        this.setState({\r\n            show: !show\r\n        }, function () {\r\n            let self = this;\r\n            if (self.state.show) {\r\n                if (self.props.showBack) {\r\n                    self.props.showBack();\r\n                }\r\n            } else {\r\n                if (self.props.onChange && data) {\r\n                    self.setState({\r\n                        clear: data.clear\r\n                    });\r\n\r\n                    self.props.onChange(e, data);\r\n\r\n                    self.setState({\r\n                        selectDays: data\r\n                    });\r\n\r\n                }\r\n            }\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n\r\n    // /点击事件\r\n    handleClick(e) {\r\n        let _btn = document.getElementById(this.mid);\r\n        if (_btn && _btn.style.display === 'block') {\r\n            return;\r\n        }\r\n        const self = this;\r\n        // 设置set\r\n        self.showOrHide(self.state.show);\r\n        if (self.handler) {\r\n            offClickBlank(self.handler);\r\n        }\r\n        // 绑定点击空白事件\r\n        self.handler = clickBlank(\r\n            document.getElementById(self.mid),\r\n            function (mark) {\r\n                if (!mark) {\r\n                    self.showOrHide(true);\r\n                    offClickBlank(self.handler);\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    // /更新弹窗里面的数据\r\n    componentDidUpdate(prevProps) {\r\n        if(document.getElementById(this.mid)){\r\n            this.renderDiv(true);\r\n        }\r\n    }\r\n\r\n    // /渲染前，先设置 startDate 和 endDate\r\n    componentWillMount() {\r\n\r\n        let date = {};\r\n        if (this.props.defaultValue) {\r\n            let arr = this.props.defaultValue.split('/');\r\n            date['startDate'] = strToObj(arr[0]);\r\n            date['endDate'] = strToObj(arr[1]);\r\n        } else {\r\n            let now = getDateNow();\r\n            date['startDate'] = now;\r\n            date['endDate'] = now; // addOrDelMonthDay(now, 'add');\r\n        }\r\n        this.setState({\r\n            startDate: date.startDate,\r\n            endDate: date.endDate\r\n        });\r\n\r\n        // 设置默认值\r\n        if (this.props.defaultValue) {\r\n            this.setState({\r\n                selectDays: {\r\n                    str: formatDate(date.startDate, this.props.format).val + ' ~ ' + formatDate(date.endDate, this.props.format).val\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // 卸载组件\r\n    componentWillUnmount() {\r\n        offClickBlank(this.handler);\r\n        removeDom(this.div);\r\n        ReactDOM.unmountComponentAtNode(this.div);\r\n    }\r\n\r\n    render() {\r\n        var { mid, format, showBack, range, modalClass, defaultValue, modalStyle, className, size, onChange, ...other } = this.props;\r\n        var dayval = this.state.selectDays ? this.state.selectDays.str : '';\r\n        var cName = ['mt-input mt-input-dates'];\r\n        if (className) {\r\n            cName.push(className);\r\n        }\r\n        cName.push('mt-input-' + (size ? size : 'nm'));\r\n        if (mid) {\r\n            this.mid = mid;\r\n        }\r\n\r\n        return <span ref={(c) => { this.refBtn = c; }} className={cName.join(' ')} onClick={this.handleClick.bind(this)}>\r\n            <input\r\n                value={this.state.clear ? '' : dayval}\r\n                readOnly\r\n                type=\"text\"\r\n                placeholder={this.props.placeholder}\r\n                {...other} />\r\n            <span className=\"mt-input-suffix\"><i className=\"iconfont icon-date\"></i></span>\r\n        </span>;\r\n    }\r\n}\r\n\r\n// 主页\r\nexport default DatePickers;"]}